(this["webpackJsonpdemo-context-api"]=this["webpackJsonpdemo-context-api"]||[]).push([[0],{169:function(e,t,n){e.exports=n(321)},198:function(e,t){},200:function(e,t){},214:function(e,t){},216:function(e,t){},244:function(e,t){},246:function(e,t){},247:function(e,t){},252:function(e,t){},254:function(e,t){},261:function(e,t){},263:function(e,t){},281:function(e,t){},284:function(e,t){},300:function(e,t){},303:function(e,t){},321:function(e,t,n){"use strict";n.r(t);var a=n(21),r=n(22),c=n(24),o=n(23),l=n(0),i=n.n(l),u=n(41),s=n.n(u),m=n(325),p=n(323),f=n(9),d=n(10),h=n.n(d),g=n(25),b=n(51),v=n.n(b);var E=function(e){var t=Object(l.useState)([]),n=Object(f.a)(t,2),a=n[0],r=n[1],c=function(){var e=Object(g.a)(h.a.mark((function e(t){var n,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.complete=!1,n={headers:{"Content-Type":"application/json"},mode:"cors"},"https://lab32-401.herokuapp.com",a={item:t.item,difficulty:t.difficulty,complete:t.complete,assignee:t.assignee},e.next=6,v.a.post("https://lab32-401.herokuapp.com",a,n);case 6:return e.next=8,u();case 8:c=e.sent,r([c]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(g.a)(h.a.mark((function e(t,n){var a,c,o,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"},mode:"cors"},c="https://lab32-401.herokuapp.com/".concat(n),o={item:t.item,difficulty:t.difficulty,complete:!t.complete,assignee:t.assignee},e.next=5,v.a.put(c,o,a);case 5:return e.next=7,u();case 7:l=e.sent,r([l]);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i=function(){var e=Object(g.a)(h.a.mark((function e(t){var n,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"},mode:"cors"},a="https://lab32-401.herokuapp.com/".concat(t),e.next=4,v.a.delete(a,n);case 4:return e.next=6,u();case 6:c=e.sent,r([c]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var t=Object(g.a)(h.a.mark((function t(){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{"Content-Type":"application/json"},mode:"cors"},"https://lab32-401.herokuapp.com",t.next=4,v.a.get("https://lab32-401.herokuapp.com",n);case 4:a=t.sent,e(a.data);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return[c,o,i,u,a]},j=i.a.createContext();var y=function(e){var t=Object(l.useState)([]),n=Object(f.a)(t,2),a=n[0],r=n[1],c=Object(l.useState)("Go to All"),o=Object(f.a)(c,2),u=o[0],s=o[1],m=Object(l.useState)(0),p=Object(f.a)(m,2),d=p[0],h=p[1],g=Object(l.useState)(0),b=Object(f.a)(g,2),v=b[0],y=b[1],O=E((function(e){r(e)})),k=Object(f.a)(O,4),C=k[0],x=k[1],w=k[2],S=k[3];Object(l.useEffect)((function(){S()}));var T={list:a,add:C,update:x,delete:w,funList:r,toggle:u,funToggle:s,buttons:d,funButton:h,count:v,funCount:y};return i.a.createElement(j.Provider,{value:T},e.children)};n(99);var O=function(){var e=Object(l.useContext)(j).list.filter((function(e){return!e.complete})),t=Object(l.useState)(0),n=Object(f.a)(t,2),a=n[0],r=n[1];return Object(l.useEffect)((function(){r(e.length),document.title="There are ".concat(a," Items To Complete")}),[a,e]),i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,null,i.a.createElement(m.a,{bg:"dark",variant:"dark",style:{marginTop:"2em"}},i.a.createElement(m.a.Brand,null,"There are ",a," Items To Complete"))))},k=(n(193),n(328)),C=n(327),x=n(167),w=n(326),S=n(89),T=n.n(S),N=n(162),I=n.n(N),B="https://lab32-401.herokuapp.com",A=i.a.createContext(),L=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).login=function(){var e=Object(g.a)(h.a.mark((function e(t,n){var a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(B,"/signin"),{method:"POST",mode:"cors",cache:"no-cache",headers:new Headers({Authorization:"Basic ".concat(btoa("".concat(t,":").concat(n)))})});case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,r.validateToken(c.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("check your code",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),r.signup=function(){var e=Object(g.a)(h.a.mark((function e(t,n,a){var c,o,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={username:t,password:n,role:a},e.prev=1,e.next=4,fetch("".concat(B,"/signup"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(c)});case 4:return o=e.sent,e.next=7,o.json();case 7:l=e.sent,r.validateToken(l.token),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("there is an error",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n,a){return e.apply(this,arguments)}}(),r.logout=function(){r.setLoginState(!1,null,{})},r.validateToken=function(e){try{var t=I.a.verify(e,"homesweet");r.setLoginState(!0,e,t)}catch(n){r.logout(),console.log("validate token error")}},r.setLoginState=function(e,t,n){T.a.save("token",t),r.setState({token:t,loggedIn:e,user:n})},r.state={loggedIn:!1,login:r.login,signup:r.signup,logout:r.logout,user:{}},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=T.a.load("token")||null;this.validateToken(e)}},{key:"render",value:function(){return i.a.createElement(A.Provider,{value:this.state},this.props.children)}}]),n}(i.a.Component),D=function(e){return e.condition?e.children:null},G=function(e){return e.condition?e.children:null},P=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=!1;try{e=this.context.loggedIn&&(!this.props.capability||this.context.user.capability.includes(this.props.capability))}catch(t){console.warn("Not Authorized!")}return i.a.createElement(D,{condition:e},this.props.children)}}]),n}(i.a.Component);P.contextType=A;var F=P;var U=function(){var e=Object(l.useContext)(j),t=e.list.sort((function(e,t){return e.difficulty-t.difficulty})),n=e.list.filter((function(e){return!1===e.complete}));n.sort((function(e,t){return e.difficulty-t.difficulty}));var a=function(t){for(var n=[],a=function(t){n.push(i.a.createElement(k.a,{key:t,onClick:function(){return e.funButton(t)}},t+1))},r=0;r<t;r++)a(r);return n},r=function(t){return t.map((function(t){var n,a;return n=t.complete?"danger":"success",a=t.complete?"Complete":"Pending",i.a.createElement(C.a,{key:t._id},i.a.createElement(x.a,{closeButton:!1},i.a.createElement(L,null,i.a.createElement(F,{capability:"update"},i.a.createElement(k.a,{className:"complete",onClick:function(){return e.update(t,t._id)},variant:"".concat(n)},a)," ")),i.a.createElement("strong",{className:"mr-auto assign"},t.assignee),i.a.createElement(L,null,i.a.createElement(F,{capability:"delete"},i.a.createElement(k.a,{className:"closedel",variant:"outline-dark",onClick:function(){return e.delete(t._id)}},"X")))),i.a.createElement(C.a.Body,{className:"assign"},t.item),i.a.createElement("small",{className:"difficult"},"Difficulty: ",t.difficulty))}))},c=function(t){if(t.length>3){var n=new Array(Math.ceil(t.length/3)).fill().map((function(){return t.splice(0,3)}));return[r(n[e.buttons]),a(n.length)]}return[r(t),a(0)]};return i.a.createElement(i.a.Fragment,null,"Go to All"===e.toggle?i.a.createElement(w.a,{className:"float-right"},c(n)):i.a.createElement(w.a,{className:"float-right"},c(t)),i.a.createElement(k.a,{className:"filter-bt",onClick:function(){"Go to All"===e.toggle?(e.funToggle("Go Incomplete"),e.funButton(0)):(e.funToggle("Go to All"),e.funButton(0))}},e.toggle))},J=n(42),_=n(324),z=n(38);var H=function(e){var t=Object(l.useState)({}),n=Object(f.a)(t,2),a=n[0],r=n[1];return[function(t){t.preventDefault(),a.complete=!1,e(a)},function(e){e.persist(),r(Object(J.a)(Object(J.a)({},a),{},Object(z.a)({},e.target.name,e.target.value)))},a]};var M=function(e){var t=Object(l.useState)({}),n=Object(f.a)(t,2),a=n[0],r=n[1],c=H((function(e){m.add(e),r(Object(J.a)(Object(J.a)({},a),{},{obj:e}))})),o=Object(f.a)(c,2),u=o[0],s=o[1],m=Object(l.useContext)(j);return i.a.createElement(i.a.Fragment,null,i.a.createElement(_.a,{onSubmit:u},i.a.createElement(_.a.Group,{controlId:"formBasicEmail"},i.a.createElement("h3",null,"Add Item"),i.a.createElement(_.a.Label,null,"To Do Item"),i.a.createElement(_.a.Control,{type:"text",name:"item",placeholder:"Add To Do List Item",onChange:s})),i.a.createElement(_.a.Group,{controlId:"formBasicPassword"},i.a.createElement(_.a.Label,null,"Assigned To"),i.a.createElement(_.a.Control,{type:"text",name:"assignee",placeholder:"Assigned To",onChange:s})),i.a.createElement(_.a.Group,{controlId:"formBasicRange"},i.a.createElement(_.a.Label,null,"Range"),i.a.createElement(_.a.Control,{defaultValue:"1",type:"range",min:"1",max:"5",name:"difficulty",onChange:s})),i.a.createElement(k.a,{variant:"primary",type:"submit",style:{width:"50%"}},"Add Item")))},R=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).handleChange=function(e){r.setState(Object(z.a)({},e.target.name,e.target.value))},r.handleSubmit=function(e){e.preventDefault(),r.context.login(r.state.username,r.state.password)},r.handleSubmitSignUp=function(e){e.preventDefault(),r.context.signup(r.state.username,r.state.password,r.state.role)},r.handelClick=function(e){e.preventDefault(),r.setState({condition:!1})},r.state={username:"",password:"",role:"",condition:!0},r}return Object(r.a)(n,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(D,{condition:this.context.loggedIn},i.a.createElement("button",{onClick:this.context.logout,className:"log"},"Logout")),i.a.createElement(D,{condition:!this.context.loggedIn},i.a.createElement(G,{condition:this.state.condition},i.a.createElement("form",{onSubmit:this.handleSubmit,className:"log"},i.a.createElement("input",{placeholder:"userName",name:"username",onChange:this.handleChange}),i.a.createElement("input",{placeholder:"password",name:"password",onChange:this.handleChange}),i.a.createElement("button",null,"Login")),i.a.createElement("button",{onClick:this.handelClick,className:"logs"},"SignUp")),i.a.createElement(G,{condition:!this.state.condition},i.a.createElement("form",{onSubmit:this.handleSubmitSignUp,className:"log"},i.a.createElement("input",{placeholder:"userName",name:"username",onChange:this.handleChange}),i.a.createElement("input",{placeholder:"password",name:"password",onChange:this.handleChange}),i.a.createElement("input",{placeholder:"user,editor,admin",name:"role",onChange:this.handleChange}),i.a.createElement("button",null,"SignUp")))))}}]),n}(i.a.Component);R.contextType=A;var V=R,X=function(){return Object(l.useContext)(y),i.a.createElement(i.a.Fragment,null,i.a.createElement("header",null,i.a.createElement(m.a,{bg:"primary",variant:"dark"},i.a.createElement(m.a.Brand,null,"Home"))),i.a.createElement("main",null,i.a.createElement(p.a,null,i.a.createElement(y,null,i.a.createElement(L,null,i.a.createElement(V,null),i.a.createElement("div",{id:"flex"},i.a.createElement(F,{capability:"read"},i.a.createElement(O,null),i.a.createElement("section",{className:"todo"},i.a.createElement("div",{className:"list-group"},i.a.createElement(U,null)))),i.a.createElement(F,{capability:"update"},i.a.createElement("section",{className:"todo"},i.a.createElement("div",{className:"form-border"},i.a.createElement(M,null))))))))))},q=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return i.a.createElement(X,null)}}]),n}(i.a.Component),K=document.getElementById("root");s.a.render(i.a.createElement(q,null),K)},99:function(e,t,n){}},[[169,1,2]]]);
//# sourceMappingURL=main.a2ec72f7.chunk.js.map